# Building a ReactJS Project
Uses: Babel (JSX compilation), Live-server (local server), Yarn/NPM (installations)

## QUICK LOOK - Setting up the ENV
+ Create
  `src/` -> stores files you write
  `public/` -> stores files generated or front-facing
    *example* index.html, scripts (compiled down by Babel)

1. Install the following:
  + Yarn or NPM
  + Live-server
  + Babel
  + NodeJS

2. Generate `package.json`
  `$ yarn init`

3. Add Babel dependency to package.json
  `$ yarn add babel-preset-react@6.24.1 babel-preset-env@1.5.2`
* Do NOT mess with `yarn.lock`

### Using Live-Server to host
  `$ live-server <dir>`

### CDN for React & ReactDOM
* Put in `<body>`
`  <script src="https://unpkg.com/react@16.0.0/umd/react.development.js"></script>`
`  <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js"> `
`    </script> `
`  <script src="/scripts/app.js"> `
`    </script> `

### React Docs
+ Search 'react dom events' and find *SyntheticEvent* Gives a list of events: *example* `onClick`, `onSubmit`
[SyntheticEvents](https://reactjs.org/docs/events.html)

## Using Babel Presets
* Write code to a file and have it generated into a different file

###FILE STRUCTURE:
  * `/public/scripts/app.js` is generated by Babel
  * `/src/scripts/<files>` are code written in JSX
  * `index.html` will use the code generated by Babel

+ Babel compiles JSX into Javascript
+ Install `babel`, `env` preset, `react` preset

* Setting up the *environment*
  1. Using Yarn to install Babel
  `$ yarn global add babel-cli@6.24.1`
    (might fail)
  2. Using NPM to install Babel
  `$ npm install -g babel-cli@6.24.1` 
    (use if yarn fails)

* Setting up the file structure
  1. Using Yarn to set up boiler plate
    `$ yarn init`
  2. Using Yarn to install Babel presets
    `$ yarn add babel-preset-react@6.24.1 babel-preset-env@1.5.2` 

* Using Babel to compile code
  + `$ babel <input-file-path> --out-file=<path> --presets=<preset1,preset2> --watch`

  EXAMPLE
  `$ babel src/app.js --out-file=public/scripts/app.js --presets=env,react --watch`

## Work-flow
What to do in Terminal to start working

* Start working Locally
  1. `$ yarn install`
  Install dependencies
  2. Start up Babel
  3. Start up `live-server public`

  ## Using React

+ Event handlers w/in HTML bits of .js file
*examples* With Forms, using `e.preventDefault()` so full page is not *refreshed* when Form fires.
  + `e` stands for 'element'

  ```
  const onFormSubmit = (e) => {
    e.preventDefault();
  };
  <form onSubmit={onFormSubmit}>
    <input type="text" name="option" />
  ```
  + Important to *not* call `onFormSubmit()` otherwise page will refresh.
  + Using `e` to gain access to JS option and thus the *value* of `option` on the Form in the DOM `e.target.elements.option.value`

## Local Storage
In lieu of a database...storing on your Browser

+ Everything is a string, thus the need to `JSON.stringify()` and then `JSON.parse()` to handle operations
+ Storage stays forever, even when the Browser is closed

1. Saving:
`localStorage.setItem("itemKey", "itemValue");`
OR
`localStorage.itemKey = "itemValue";`
2. Fetching:
`localStorage.getItem("itemKey");`
  1. Or, the *super HTML* way:
  `document.getElementById("result").innerHTML = localStorage.getItem("itemKey");`
3. Removing/Deleting:
`localStorage.removeItem("itemKey");`
4. Purging/Clearing:
`localStorage.clear();`

## Package.json Scripts & Webpack
+ Gets away from Global modules – this is good cos
  *EXAMPLE*: live-server, babel
+ Gives *aliases* to run these *modules*

Reasons for using Webpack:
  1. At present, the *package.json* currently does not show these are needed collaborate on the project.
  2. When using multiple React projects, *globals* force them to use the same *versions* of these modules.
  3. The need to constantly type global commands in the terminal.

### Implementing Scripts
+ First use Scripts w/in package.json

1. Delete *global* modules.
  W/yarn `$ yarn global remove babel-cli live-server`
  W/npm `$ npm uninstall -g babel-cli live-server`
2. Re-install them but *locally*.
  From w/in project folder, `$ yarn add live-server babel-cli@6.24.1`
  + Doing this makes the commands *not* available from Terminal, but allows them to be accessed through *scripts* which will appear in `package.json`
  
    W/in *package.json*:
    ` "scripts": { `
    `   "serve": "live-server public/" `
    `   "build": "babel src/app.js --out-file=public/scripts/app.js --presets=env,react --watch " `
    ` },`
    + *serve* and *build* could be anything, *chicken* and *egg* would work just as well.
    + NOTE: *serve* will not be used once we set up Webpack, as `module` w/in Webpack will do all of that for us...see below.

    Use in Terminal:
    `$ yarn run serve`
    `$ yarn run build`

## Webpack setup
1. Install *locally*
  `$ yarn add webpack@3.1.0`
2. Include in *package.json* w/in `"scripts: { ... }`
  `"build": "webpack --watch"`
  + Webpack will eventually run the `babel` script w/in `webpack.config.js`
3. Create webpack.config.js lives w/in the *root* folder
  + Will be a NodeJS script
  1. Where is the *entry*
  2. Where is the *output*

`const path = require(path); ` *see below* 
`  module.exports = { `
`    entry: './src/app.js,' `
`    output: { `
`      path: path.join(__dirname, 'public'), ` *see below*
`      filename: 'bundle.js' `
`    } `
`  }; `

  *path* must be an absolute PATH, get this using:
    `__dirname`
  Need to `.join()` to attach *public/* to this *absolute* PATH

  Set up the PATH variable
    `const path = require('path'); `
  Add PATH into NodeJS script
    `path: path.join(__dirname, 'public')`

### Running Webpack
From Terminal:
  `$ yarn run build` *build* refers to the Script w/in *package.json* which runs the *Webpack* command

W/in `index.html`:
Can remove other *scripts* tags and replace them w/ 
  ` <script src="/bundle.js"></script> `

+ Need to re-install some Dependencies and then `import` them.
1. react & react-dom
`$ yarn add react@16.0.0 react-dom@16.0.0 `
  + Still is not working w/in *app.js* because needs import.
  `import React from 'react'; import ReactDOM from 'react-dom'; `
  + Currently using ES5 syntax so need Babel as well

  EXAMPLE ES5:
  ` const template = React.createElement('p', {}, 'testing 124'); `
  ` ReactDOM.render(template, document.getElementById('app')); `


2. babel core, instead of babel-cli: 
  + *babel core* allows you to run babel from tools like Webpack
  + *babel loader* is a Webpack plugin which teaches webpack how to run w/babel
`$ yarn add babel-core@6.25.0 babel-loader@7.1.1`

+ Add *babel-loader* to `webpag.config.js`. Can find this in Webpack documentation.
`module: { `
`  rules: [{ `
`    loader: 'babel-loader', `
`    test: /\.js$/, `
`    exclude: /node_modules/ `
`  }] ` 
`}; `
  + This does *not* run the `--presets=env,react` tags -> as we could from *package.json* or from the *terminal*. 

3. Create `.babelrc` file and use it to run babel `--presets`. Place it in */root* dir, e.g. alongside *package.json*.
  + w/in `.babelrc`
`    { `
`      "presets": [ `
`        "env", `
`        "react" `
`      ] `
`    }`

4. Set up a *source map* by using `devtool` in *webpack.config.js* so that errors are more easily tracked down in development.
  + Add it to *webpack.config.js*
  ` devtool: 'cheap-module-eval-source-map'  `

5. Using `webpack devServer` for development. 
  + devServer 1) serves up the app locally and also 2) runs webpack in 1 command.
  ` $ yarn add webpack-dev-server@2.9.1`
    + *NOTE* newer versions of `webpack-dev-server` throw an annoying error, must currently *downgrade* to 2.9.1 for it to work.
  + Add it to *webpack.config.js*
  ` devServer: { contentBase: path.join(__dirname, 'public') }`
    + Does not generate a `bundle.js` again and again as it runs it from memory (and speeds up reloading)
    + *NOTE* Once we Deploy, will still use `$ yarn run build` for producing `bundle.js`, as we will need to upload that for Deployment.
  + Set up *Script* w/in *package.json*
    ` "dev-server": "webpack-dev-server" `
    + No longer need the *--watch* in any longer as *devServer* will do this,
    ` "build": "webpack --watch" `
    + No longer need the *babel* script as Webpack is also taking care of transpiling ES6/JSX into ES5 JS.

### Silly add-ons

1. babel class plugin which will remove the need for *constructor* functions binding `this` in our React components...ugh.
` $ yarn add babel-plugin-transform-class-properties@6.24.1 `

  + Set up in *.babelrc*
  ` ...code...{ `
  ` "plugins": [ "transform-class-properties" ] `
  ` ...} `
  + Restart *dev-server*

  + *EXAMPLE: Old Syntax*
  ` class OldSyntax { `
  `   constructor() { `
  `     this.name = 'Mike'; `
  `     this.getGreeting = this.getGreeting.bind(this); `
  `   } `
  `   getGreeting() { `
  `     return 'Hi, my name is ${this.name}.' `
  `   } `
  ` }; `
  ` const oldSyntax = new OldSyntax(); `
  ` const getGreeting = oldSyntax.getGreeting; `
  ` console.log(oldSyntax); `
  ----------------------------------
  + *EXAMPLE: New Syntax*
  ` class NewSyntax { `
  `   name = 'Jen'; `
  `   getGreeting = () => { `
  `     return 'Hi, my name is ${this.name}.' `
  `   } `
  ` }; `
  ` const newSyntax = new NewSyntax();  `
  ` const newGetGreeting = newSyntax.getGreeting; `
  ` console.log(newGetGreeting());  `

2. React-modal
` $ yarn add react-modal `

+ Returning a 'true' Boolean: try it in *console*; can use these when *setting* values like *undefined* but you want a boolean.
  ` !!undefined ` -> returns `false`
  ` !undefined ` -> returns `true`

## STYLING
+ Begin by setting up normal CSS (will change to SCSS later)
1. Create `src/styles/styles.css`
2. Configure Webpack with a *rule* that looks for `.css` files.
  W/in *webpack.configure.js*:
`  rules: [ `
`    { `
`      loader: 'babel-loader', `
`      test: /\.js$/, `
`      exclude: /node_modules/ `
`    }, `
`    { `
`      test: /\.css$/, `
`      use: [ `
`        'style-loader', `
`        'css-loader' `
`      ] `
`    } `
`  ] `
  *use* is similar to *loader* takes an ARRAY which allows multiple loaders.
  *NOTE* `style-loader` *must* come BEFORE `css-loader` or `dev-server` will FAIL to build.

3. Specify *loaders*
  1. *css-loader* -> changes CSS into a JS representation
  2. *style-loader* -> takes what *css-loader* does and adds it to the DOM using `<style>` tags

  ` $ yarn add style-loader css-loader `

4. Import `styles.css` into `app.js`
  ` import './styles/styles.css'; `
  *NOTE* Doing this presently so that we can *set up* `SCSS`, will probably change as this makes us *wait until JS runs* to set up our Styles, i.e. inefficient.
+ Change it to SCSS. [Sass-lang](sass-lang.com)

1. Change *webpack.configure.js* **rule** > test to `/\.scss$/`

2. Add loaders
  + sass-loader@6.0.6 -> imports SASS files
  + node-sass@4.5.3 -> converts SASS code into CSS code
  ` $ yarn add sass-loader@6.0.6 node-sass@4.5.3 `

3. Change `styles.css` to `styles.scss`

4. Add `sass-loader` to *webpack.configure.js* into the `use` ARRAY

### Partials
+ Breaking up Styles into separate files. These separate files are known as *partials*.
+ W/in **src/styles/** create **base/** and then **base/_base.scss**; will put *basic* font styles here.
+ Partials begin with `_`
  *EXAMPLE*: `_someName.scss`
+ When *importing* Partials into SCSS use the following syntax, which drops the underscore -> `_` and the file extension -> `scss`:
  ` @import './base/base'; `

### REM in lieu of Pixels
+ Working w/*rem*s instead of *px* because they have **better support** for accessibility, customization, etc.
+ 1rem = 16px
+ To make **rem*s work in base10, do the following conversion:
`   html { `
`     font-size: 62.5%; `
`   } `
  + Because *math* -> 16 * .625 = 10, thus 1rem = 10px...yeah, stupid, right?

+ Remember that `class="blah"` is **not** supported in JSX; instead use `className="blah"` which will be converted into `class="blah"`.

+ BEM Block Element Modifiers -> a naming convention to avoid tons of SCSS *nesting*
  ` .header__title { ...code; } `
  + This is **just a naming convention** and not a necessity.

### Reset CSS – Normalize CSS
+ Do this so different Browsers do not F w/your settings.
+ There are several different plugins: we're using *Normalize CSS*
+ This removes the Browser or OS's ability to *style* the DOM as it chooses/by default – now, all of *our styles* will look the same across many platforms.

1. Add **Normalize CSS**
  ` $ yarn add normalize.css@7.0.0 `

2. Change *webpack.configure.js* line to accept `.css` OR `.scss`
`  rule: [ `
`    { `
`      ...code `
`    }, `
`    { `
`      test: /\.s?css$/ `
`      ...code `
`    } `
`  ]  `

3. Import this w/in `sr/app.js` as a normal import (file couched w/in `node_modules/` ):
  ` import 'normalize.css/normalize.css'; `

### Setting up 'master base'
+ Organize CSS so that we only have to change (1) location rather than many.

1. Create `styles/base/_settings.scss`
  + Will include a bunch of **$variables** that can be used elsewhere
2. Import it *first* into `styles/_base.scss` (as other Partials will use what it sets up)

## Responsive Pages
+ W/in `index.html` add a `<meta>` tag
  *EXAMPLE: `<meta name="viewport" content="key=value">`*
  `<meta name="viewport" content="width=device-width, initial-scale=1">`

+ Use **CSS `@media`** queries to set up *conditions* for different devices and the styles that should be used w/them.
  *EXAMPLE: `@media (CSS statement: someValue) { someSelector { CSS }  }`*
` @media (max-width: 45rem) { `
` * { `
`    color: red; `
`   } `
` } `
  + Says that, *until* viewport exceeds 45rem, use these Styles.
  + The **`*`** could be *any* selector, such as `body`, `p` or something you have created like `.that-class-i-made__okay`
---------------
## USEFUL LINKS
+ [Newest Dependency Versions](https://david-dm.org/jtangelder/sass-loader?type=dev)
+ [SyntheticEvents](https://reactjs.org/docs/events.html)
+ [Sass-lang](sass-lang.com)
+ [Sass Reference Functions](https://sass-lang.com/documentation/modules)
+ <https://unpkg.com/react@16.0.0/umd/react.development.js>
+ <https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js>